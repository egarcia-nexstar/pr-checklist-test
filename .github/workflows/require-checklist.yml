name: Require Checklist

on:
  pull_request:
    types: [opened, edited, synchronize, ready_for_review]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: mheap/require-checklist-action@v2
        with:
          requireChecklist: true
          allowEmptyChecklist: false

      - name: Block PR if No selected
        run: |
          BODY="$(jq -r '.pull_request.body' "$GITHUB_EVENT_PATH")"
          if grep -E "^- \[[xX]\] No" <<< "$BODY"; then
            echo "âŒ Checklist contains 'No'. Fix before merging."
            exit 1
          fi
